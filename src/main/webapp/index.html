<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>movieholic | Startseite</title>

    <!-- add icon link -->
    <link rel="icon" href="/images/logo.png" type="">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css"
          rel="stylesheet"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/mh.css">
    <script src="js/mh.js"></script>
</head>
<body data-bs-spy="scroll" data-bs-target=".navbar" data-bs-offset="50" onload="loadGenres();loadTrending()">
<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
    <div style="width: 100%" class="d-flex justify-content-between" id="navbarContent">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="navbar-brand" href="javascript:void(0)"><img src="images/logo.png" alt=""
                                                                                        id="logo"></a>
            </li>
            <li class="nav-item"><a class="nav-link" href="#searchResult">Search</a></li>
            <li class="nav-item"><a class="nav-link" href="#trendingResult">Trending</a></li>
        </ul>
        <form class="d-flex">
            <input id="searchInput" onkeyup="searchMovie(searchInput.value, 1)" class="form-control me-2"
                   type="text" placeholder="Search">
            <button type="button" data-bs-toggle="modal" data-bs-target="#discoverModal"
                    class="btn btn-outline-light"
                    data-toggle="tooltip" data-placement="bottom" title="To find your film without the title!">
                Discover
            </button>
        </form>

        <div class="nav-item navLogin" data-bs-toggle="modal" data-bs-target="#loginModal" id="loginSector">
            <span id="loginSpan">Login</span>
            <svg id="loginImg" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                 class="bi bi-person-plus" viewBox="0 0 16 16">
                <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                <path fill-rule="evenodd"
                      d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
            </svg>
        </div>
    </div>
</nav>

<button type="button" class="btn btn-light btn-rounded" data-bs-toggle="modal" data-bs-target="#discoverModal"
        data-toggle="tooltip" data-placement="bottom" title="To find your film without the title!">
    Discover
</button>

<hr>

<div class="d-flex justify-content-center d-flex align-items-center" id="searchResult">

</div>

<div id="singleMovieDiv">

</div>


<div class="row">
    <div class="col">
        <hr class="bg-danger border-2 border-top border-danger">
    </div>
    <div class="col-auto">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
             class="bi bi-lightning-charge" viewBox="0 0 16 16">
            <path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09zM4.157 8.5H7a.5.5 0 0 1 .478.647L6.11 13.59l5.732-6.09H9a.5.5 0 0 1-.478-.647L9.89 2.41 4.157 8.5z"/>
        </svg>
        Movie-Trends of the Week
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
             class="bi bi-lightning-charge" viewBox="0 0 16 16">
            <path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09zM4.157 8.5H7a.5.5 0 0 1 .478.647L6.11 13.59l5.732-6.09H9a.5.5 0 0 1-.478-.647L9.89 2.41 4.157 8.5z"/>
        </svg>
    </div>
    <div class="col">
        <hr class="bg-danger border-2 border-top border-danger">
    </div>
</div>

<div class="d-flex justify-content-center d-flex align-items-center" id="trendingResult">

</div>


<div class="modal fade" id="discoverModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Discover</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="releaseYear">Release Year</label>
                    <input class="form-control" id="releaseYear" placeholder="2022" type="text">
                </div>
                <div class="form-group">
                    <label for="region">Region</label>
                    <input class="form-control" id="region" placeholder="en-US" type="text">
                </div>
                <div class="form-group">
                    <label for="search_param">Genre</label>
                    <select name="search_param" id="search_param"
                            class="form-control">
                        <option value="">All</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="sort_param">Sort</label>
                    <select name="sort_param" id="sort_param"
                            class="form-control">
                        <option value="popularity.asc">Popularity</option>
                        <option value="release_date.asc">Release Date</option>
                        <option value="revenue.asc">Revenue</option>
                        <option value="original_title.asc">Title</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="monetization_param">Monetization</label>
                    <select name="monetization_param" id="monetization_param"
                            class="form-control">
                        <option value="flatrate">flatrate</option>
                        <option value="free">free</option>
                        <option value="ads">ads</option>
                        <option value="rent">rent</option>
                        <option value="buy">buy</option>
                    </select>
                </div>
                <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input" id="adult">
                    <label class="custom-control-label" for="adult">Adult content</label>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="discover(
                    releaseYear.value, monetization_param.value, region.value, region.value, sort_param.value, adult.checked, search_param.value);"
                        type="button"
                        class="btn btn-primary">Search
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Login</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="d-grid gap-3">
                    <label for="tfLoginEmail">
                        E-Mail <br>
                        <input type="email" class="form-control" placeholder="E-Mail" id="tfLoginEmail" required>
                    </label>
                    <label for="tfLoginPassword">
                        Password <br>
                        <input type="password" class="form-control" placeholder="Password" id="tfLoginPassword"
                               required>
                    </label>
                </div>
                <div id="loginInfo" style="color: red" class="d-grid gap-3">

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-bs-toggle="modal"
                        data-bs-target="#registerModal">Register
                </button>
                <button type="button" class="btn btn-primary" id="signIn">Login</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registerModalLabel">Register</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="d-grid gap-3">
                    <label for="tfRegisterEmail">
                        E-Mail <br>
                        <input type="email" class="form-control" placeholder="E-Mail" id="tfRegisterEmail" required>
                    </label>
                    <label for="tfRegisterPassword1">
                        Password <br>
                        <input type="password" class="form-control" placeholder="Password" id="tfRegisterPassword1"
                               required>
                    </label>
                    <label for="tfRegisterPassword2">
                        Repeat password <br>
                        <input type="password" class="form-control" placeholder="Password" id="tfRegisterPassword2"
                               required>
                    </label>
                </div>
                <div id="registerInfo" style="color: red" class="d-grid gap-3">

                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-bs-toggle="modal"
                        data-bs-target="#loginModal">Login
                </button>
                <button type="button" class="btn btn-primary" id="signUp">Register</button>
            </div>
        </div>
    </div>
</div>

</body>
<footer style="margin-top: 100px" class="bg-dark text-center text-white">

    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        © 2022 Copyright:
        <a target=”_blank” class="text-white" href="https://github.com/soesia18/movieholic">movieholic</a>
    </div>
    <!-- Copyright -->
</footer>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.0/firebase-app.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/9.8.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.8.0/firebase-auth.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAUOrSjeSbS44wdOAl-4vrR-4C9gGVmxNQ",
        authDomain: "movieholic-72a5e.firebaseapp.com",
        databaseURL: "https://movieholic-72a5e-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "movieholic-72a5e",
        storageBucket: "movieholic-72a5e.appspot.com",
        messagingSenderId: "822798284403",
        appId: "1:822798284403:web:ac600428a2cd52cfebdc06"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth(app);


    signUp.addEventListener("click", (e) => {
        let email = document.getElementById("tfRegisterEmail").value;
        let password1 = document.getElementById("tfRegisterPassword1").value;
        let password2 = document.getElementById("tfRegisterPassword2").value;

        if (password1 === password2){
            createUserWithEmailAndPassword(auth, email, password1)
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log("User created");
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.log("Error: " + errorMessage);
                });
        }
    });

    signIn.addEventListener("click", (e) => {
        let email = document.getElementById("tfLoginEmail").value;
        let password = document.getElementById("tfLoginPassword").value;

        signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                const user = userCredential.user;
                console.log("logged in");
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;

                console.log("Error: " + errorMessage);
            });
    });
</script>
</html>